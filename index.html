<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PWA Inline</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2rem; }
    button { padding: 1rem 2rem; font-size: 1.2rem; }
  </style>
  <link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABXElEQVR42mNgGAWjgP8zMDIgx0AFsW0Q1kAW6y8DOQNgfPgPxK3Afw3EFcP8+RlA3g7E4+N8DAyMjP4Nxf4v3I1NgYFRAN+E8QnDRZ7AeJ+eP///+f/B8zM/1ZkAGqq+uO///+x4bDYwMjJyTfAwPD39ZAKYOTn56v/fz/f+zBdSKIjAxMfH+v3//qgGmgDwrACUycHx8TAxM//r//z+A3gGSvDK9DwMDAz8XbAwMDQwAAAwDFm5ryzB7NQwAAAABJRU5ErkJggg==">
</head>
<body>
  <h1>PWA Inline ðŸ˜Ž</h1>
  <p>Este Ã© um exemplo de PWA em um Ãºnico HTML.</p>
  <button onclick="alert('Funciona!')">Testar</button>

  <script>
    // Criar manifest.json inline
    const manifest = {
      name: "PWA Inline",
      short_name: "PWA",
      start_url: ".",
      display: "standalone",
      background_color: "#ffffff",
      theme_color: "#000000",
      icons: [{
        src: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABXElEQVR42mNgGAWjgP8zMDIgx0AFsW0Q1kAW6y8DOQNgfPgPxK3Afw3EFcP8+RlA3g7E4+N8DAyMjP4Nxf4v3I1NgYFRAN+E8QnDRZ7AeJ+eP///+f/B8zM/1ZkAGqq+uO///+x4bDYwMjJyTfAwPD39ZAKYOTn56v/fz/f+zBdSKIjAxMfH+v3//qgGmgDwrACUycHx8TAxM//r//z+A3gGSvDK9DwMDAz8XbAwMDQwAAAwDFm5ryzB7NQwAAAABJRU5ErkJggg==",
        sizes: "192x192",
        type: "image/png"
      }]
    };

    const blob = new Blob([JSON.stringify(manifest)], { type: 'application/json' });
    const manifestURL = URL.createObjectURL(blob);
    const manifestLink = document.createElement('link');
    manifestLink.rel = 'manifest';
    manifestLink.href = manifestURL;
    document.head.appendChild(manifestLink);

    // Criar service worker inline
    const swCode = `
      self.addEventListener('install', e => {
        console.log('SW instalado');
        self.skipWaiting();
      });
      self.addEventListener('fetch', e => {
        // Cache pode ser implementado aqui
      });
    `;
    const swBlob = new Blob([swCode], { type: 'application/javascript' });
    const swUrl = URL.createObjectURL(swBlob);

    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register(swUrl)
        .then(() => console.log('Service Worker registrado'))
        .catch(err => console.error('Erro no SW', err));
    }
  </script>
</body>
</html>
